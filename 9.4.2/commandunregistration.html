<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js rust">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Command unregistration - CommandAPI Documentation v9.4.1</title>


        <!-- Custom HTML head -->
        
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="fontawesome/css/fontawesome.css">
        <link rel="stylesheet" href="fontawesome/css/brands.css">
        <link rel="stylesheet" href="fontawesome/css/solid.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="style.css">

        <!-- MathJax -->
        <script async type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "rust";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('rust')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="intro.html">Introduction</a></li><li class="spacer"></li><li class="chapter-item expanded affix "><li class="part-title">Server Owner Usage</li><li class="chapter-item expanded "><a href="installation.html">Installation for server owners</a></li><li class="chapter-item expanded "><a href="config.html">Configuration for server owners</a></li><li class="chapter-item expanded "><a href="conversionforowners.html">Command conversion</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="conversionforownerssingle.html">Single command conversion</a></li><li class="chapter-item expanded "><a href="conversionforownerssingleargs.html">Single command conversion (with arguments)</a></li><li class="chapter-item expanded "><a href="conversionentityselectors.html">Entity selectors</a></li></ol></li><li class="chapter-item expanded "><a href="skippingproxysenders.html">Skipping proxy senders</a></li><li class="spacer"></li><li class="chapter-item expanded affix "><li class="part-title">CommandAPI Setup</li><li class="chapter-item expanded "><a href="setup_dev.html">Setting up your development environment</a></li><li class="chapter-item expanded "><a href="setup_shading.html">Shading the CommandAPI in your plugins</a></li><li class="chapter-item expanded "><a href="setup_annotations.html">Using the annotation system</a></li><li class="chapter-item expanded affix "><li class="part-title">Creating Commands</li><li class="chapter-item expanded "><a href="commandregistration.html">Command registration</a></li><li class="chapter-item expanded "><a href="commandunregistration.html" class="active">Command unregistration</a></li><li class="chapter-item expanded "><a href="commandexecutors.html">Command executors</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="normalexecutors.html">Normal command executors</a></li><li class="chapter-item expanded "><a href="proxysender.html">Proxied commandsenders</a></li><li class="chapter-item expanded "><a href="native.html">Native commandsenders</a></li><li class="chapter-item expanded "><a href="resultingcommandexecutors.html">Resulting command executors</a></li><li class="chapter-item expanded "><a href="commandfailures.html">Handling command failures</a></li></ol></li><li class="chapter-item expanded "><a href="arguments.html">Command arguments</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="commandarguments.html">CommandArguments</a></li><li class="chapter-item expanded "><a href="optional_arguments.html">Optional arguments</a></li><li class="chapter-item expanded "><a href="listed.html">Listed arguments</a></li><li class="chapter-item expanded "><a href="argumentsuggestions.html">Argument suggestions</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="suggestionsinfo.html">The SuggestionsInfo record</a></li><li class="chapter-item "><a href="stringargumentsuggestions.html">String argument suggestions</a></li><li class="chapter-item "><a href="safeargumentsuggestions.html">Safely typed argument suggestions</a></li><li class="chapter-item "><a href="tooltips.html">Argument suggestions with tooltips</a></li><li class="chapter-item "><a href="asyncsuggestions.html">Asynchronous suggestions</a></li></ol></li><li class="chapter-item expanded "><a href="argumenttypes.html">Argument types</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="argument_primitives.html">Primitive arguments</a></li><li class="chapter-item "><a href="argument_range.html">Ranged arguments</a></li><li class="chapter-item "><a href="argument_strings.html">String arguments</a></li><li class="chapter-item "><a href="category_positional_arguments.html">Positional arguments</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="argument_locations.html">Location arguments</a></li><li class="chapter-item "><a href="argument_rotation.html">Rotation arguments</a></li><li class="chapter-item "><a href="argument_axis.html">AxisArguments</a></li></ol></li><li class="chapter-item "><a href="argument_chats.html">Chat arguments</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="argument_chat_spigot.html">Spigot chat arguments</a></li><li class="chapter-item "><a href="argument_chat_adventure.html">Adventure chat arguments</a></li><li class="chapter-item "><a href="chatpreview.html">Chat preview</a></li></ol></li><li class="chapter-item "><a href="argument_entities.html">Entity & player arguments</a></li><li class="chapter-item "><a href="category_scoreboard_arguments.html">Scoreboard arguments</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="argument_scoreboards.html">Scoreboard arguments</a></li><li class="chapter-item "><a href="argument_objectives.html">Objective arguments</a></li><li class="chapter-item "><a href="argument_team.html">Team arguments</a></li></ol></li><li class="chapter-item "><a href="category_miscellaneous_arguments.html">Miscellaneous arguments</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="argument_angle.html">Angle arguments</a></li><li class="chapter-item "><a href="advancementargument.html">Advancement arguments</a></li><li class="chapter-item "><a href="argument_biome.html">Biome arguments</a></li><li class="chapter-item "><a href="argument_blockstate.html">BlockState arguments</a></li><li class="chapter-item "><a href="argument_enchantment.html">Enchantment arguments</a></li><li class="chapter-item "><a href="argument_itemstack.html">Itemstack arguments</a></li><li class="chapter-item "><a href="argument_loottable.html">LootTable argument</a></li><li class="chapter-item "><a href="argument_mathoperation.html">MathOperation arguments</a></li><li class="chapter-item "><a href="argument_namespacedkey.html">NamespacedKey arguments</a></li><li class="chapter-item "><a href="argument_particles.html">Particle arguments</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="argument_particle_old.html">Particle data (before 1.20.5)</a></li><li class="chapter-item "><a href="argument_particle_new.html">Particle data (1.20.5+)</a></li></ol></li><li class="chapter-item "><a href="argument_potion.html">Potion effect arguments</a></li><li class="chapter-item "><a href="argument_recipe.html">Recipe arguments</a></li><li class="chapter-item "><a href="argument_sound.html">Sound arguments</a></li><li class="chapter-item "><a href="argument_time.html">Time arguments</a></li><li class="chapter-item "><a href="argument_uuid.html">UUID arguments</a></li><li class="chapter-item "><a href="argument_world.html">World arguments</a></li></ol></li><li class="chapter-item "><a href="predicateargs.html">Predicate arguments</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="argument_blockpredicate.html">Block predicate arguments</a></li><li class="chapter-item "><a href="argument_itemstackpredicate.html">ItemStack predicate arguments</a></li></ol></li><li class="chapter-item "><a href="argument_nbt.html">NBT arguments</a></li><li class="chapter-item "><a href="category_literal_arguments.html">Literal arguments</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="argument_literal.html">Literal arguments</a></li><li class="chapter-item "><a href="argument_multiliteral.html">Multi literal arguments</a></li></ol></li><li class="chapter-item "><a href="argument_list.html">List arguments</a></li><li class="chapter-item "><a href="argument_map.html">Map arguments</a></li><li class="chapter-item "><a href="argument_command.html">Command arguments</a></li><li class="chapter-item "><a href="argument_custom.html">Custom arguments</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="functions.html">Functions & Tags</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="functionsetup.html">Setting up functions & tags</a></li><li class="chapter-item expanded "><a href="simplefunctionwrapper.html">The SimpleFunctionWrapper class</a></li><li class="chapter-item expanded "><a href="functionwrapper.html">The FunctionWrapper class</a></li><li class="chapter-item expanded "><a href="argument_function.html">Function arguments</a></li></ol></li><li class="chapter-item expanded "><a href="permissions.html">Permissions</a></li><li class="chapter-item expanded "><a href="requirements.html">Requirements</a></li><li class="chapter-item expanded "><a href="aliases.html">Aliases</a></li><li class="chapter-item expanded "><a href="help.html">Help</a></li><li class="chapter-item expanded "><a href="subcommands.html">Subcommands</a></li><li class="chapter-item expanded "><a href="commandtrees.html">Command trees</a></li><li class="chapter-item expanded affix "><li class="part-title">Annotation-based Commands</li><li class="chapter-item expanded "><a href="annotationsintro.html">Annotation-based commands</a></li><li class="chapter-item expanded "><a href="annotations.html">Annotations</a></li><li class="chapter-item expanded "><a href="registeringannotations.html">Registering annotation-based commands</a></li><li class="chapter-item expanded affix "><li class="part-title">Kotlin-based Commands</li><li class="chapter-item expanded "><a href="kotlinintro.html">Kotlin-based commands</a></li><li class="chapter-item expanded "><a href="kotlindsl.html">Using the DSL</a></li><li class="chapter-item expanded "><a href="delegated_properties.html">Delegated properties</a></li><li class="spacer"></li><li class="chapter-item expanded affix "><li class="part-title">Velocity</li><li class="chapter-item expanded "><a href="velocity_intro.html">Velocity</a></li><li class="spacer"></li><li class="chapter-item expanded affix "><li class="part-title">CommandAPI Utilities</li><li class="chapter-item expanded "><a href="conversion.html">Command conversion</a></li><li class="chapter-item expanded "><a href="reloading.html">Plugin reloading</a></li><li class="chapter-item expanded affix "><li class="part-title">Internal CommandAPI</li><li class="chapter-item expanded "><a href="internal.html">Internal CommandAPI</a></li><li class="chapter-item expanded "><a href="brigadier.html">Brigadier + CommandAPI</a></li><li class="chapter-item expanded "><a href="brigadiersuggestions.html">Brigadier Suggestions</a></li><li class="spacer"></li><li class="chapter-item expanded affix "><li class="part-title">Java Tips</li><li class="chapter-item expanded "><a href="predicatetips.html">Predicate tips</a></li><li class="spacer"></li><li class="chapter-item expanded affix "><li class="part-title">CommandAPI Contribution</li><li class="chapter-item expanded "><a href="contributionintro.html">Introduction</a></li><li class="chapter-item expanded "><a href="projectstructure.html">Project Structure</a></li><li class="spacer"></li><li class="chapter-item expanded "><a href="upgrading.html">Upgrading guide</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="upgrading_old.html">Upgrading guide (pre-9.0.0)</a></li></ol></li><li class="chapter-item expanded "><a href="faq.html">FAQ</a></li><li class="chapter-item expanded affix "><a href="incompatibleversions.html">Incompatible version information</a></li><li class="chapter-item expanded affix "><a href="troubleshooting.html">Troubleshooting</a></li><li class="spacer"></li><li class="chapter-item expanded affix "><a href="afterword.html">Afterword</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fas fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fas fa-palette"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="skepter">Skepter Likes Purple</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fas fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">CommandAPI Documentation v9.4.1</h1>

                    <div class="right-buttons">
                        <a href="https://www.jorel.dev/CommandAPI/" title="Back to main CommandAPI page" aria-label="Back to main CommandAPI page">
                            <i id="home-button" class="fas fa-home"></i>
                        </a>
                        <a href="https://ko-fi.com/jorelali" title="Donate (ko-fi)" aria-label="Donate (ko-fi)">
                            <i id="donate-button" class="fas fa-donate"></i>
                        </a>
                        <a href="https://discord.com/invite/G4SzSxZ" title="Discord" aria-label="Discord">
                            <i id="discord-button" class="fab fa-discord"></i>
                        </a>
                        <a href="https://github.com/JorelAli/CommandAPI" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fab fa-github"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <!-- Page table of contents -->
                        <div class="sidetoc"><nav class="pagetoc"></nav></div>
                        
                        <h1 id="command-unregistration"><a class="header" href="#command-unregistration">Command unregistration</a></h1>
<p>The CommandAPI allows you to remove commands completely from Minecraft's command list. This includes Vanilla commands, Bukkit commands, and plugin commands.</p>
<p>There are three methods you might use when unregistering commands:</p>
<pre><code class="language-java">CommandAPI.unregister(String commandName);
CommandAPI.unregister(String commandName, boolean unregisterNamespaces);
CommandAPIBukkit.unregister(String commandName, boolean unregisterNamespaces, boolean unregisterBukkit);
</code></pre>
<p>To understand when and how to use these methods, you need to know a little about how Bukkit loads and sets up commands. This is basically the order of events when a Bukkit server starts:</p>
<ol>
<li>Vanilla commands are placed in the Vanilla CommandDispatcher</li>
<li>Bukkit commands are placed in the Bukkit CommandMap
<ul>
<li>Given the <code>bukkit</code> namespace (E.g. <code>bukkit:version</code>)</li>
</ul>
</li>
<li>Plugins are loaded
<ul>
<li><code>onLoad</code> is called</li>
</ul>
</li>
<li>Plugins are enabled
<ul>
<li>Plugin commands are read from the <a href="https://www.spigotmc.org/wiki/plugin-yml/#commands"><code>plugin.yml</code> file</a> and placed in the Bukkit CommandMap</li>
<li>Given the plugin's name as their namespace (E.g. <code>luckperms:lp</code>)</li>
<li><code>onEnable</code> is called</li>
<li>Repeat for each plugin</li>
</ul>
</li>
<li>Bukkit's help command is registered</li>
<li>Vanilla commands are added to the Bukkit CommandMap
<ul>
<li>Given the <code>minecraft</code> namespace (E.g. <code>minecraft:gamemode</code>)</li>
</ul>
</li>
<li>The server is done loading</li>
</ol>
<p>Unregistering a command only works if it happens after the command is created. Bukkit's command system is special and has two locations where commands can exist -- either the Vanilla CommandDispatcher or the Bukkit CommandMap -- so you also need to know where your command is registered. With that in mind, here is what each of the <code>unregister</code> methods do:</p>
<pre><code class="language-java">CommandAPI.unregister(String commandName);
</code></pre>
<p>Unregisters a command from the Vanilla CommandDispatcher.</p>
<pre><code class="language-java">CommandAPI.unregister(String commandName, boolean unregisterNamespaces);
</code></pre>
<p>Unregisters a command from the Vanilla CommandDispatcher. If <code>unregisterNamespaces</code> is <code>true</code>, then any namespaced version of the command is also unregistered.</p>
<pre><code class="language-java">CommandAPIBukkit.unregister(String commandName, boolean unregisterNamespaces, boolean unregisterBukkit);
</code></pre>
<p>Unregisters a command from Bukkit. As before, if <code>unregisterNamespaces</code> is <code>true</code>, then any namespaced version of the command is also unregistered. If <code>unregisterBukkit</code> is <code>true</code>, then only Bukkit commands in the Bukkit CommandMap are unregistered. If <code>unregisterBukkit</code> is <code>false</code>, only commands from the Vanilla CommandDispatcher are unregistered.</p>
<p>To give a better idea of how and when to use these methods, the rest of this page documents how to unregister different types of commands.</p>
<h2 id="unregistering-a-bukkit-command---version"><a class="header" href="#unregistering-a-bukkit-command---version">Unregistering a Bukkit command - <code>/version</code></a></h2>
<p><code>/version</code> is a command provided by Bukkit. Looking at the sequence of events above, that means it is created during step 2, before plugins are loaded in step 3. Consequently, the command will exist when our plugin's <code>onLoad</code> method is called, so we'll unregister it there. The same code will work in <code>onEnable</code> too, since step 4 is also after step 2.</p>
<p>Since this command exists in the Bukkit CommandMap, we'll need to use <code>CommandAPIBukkit#unregister</code> with <code>unregisterBukkit</code> set to <code>true</code>. We'll also remove the namespaced version -- <code>/bukkit:version</code> -- so <code>unregisterNamespaces</code> will be <code>true</code>. All together, the code looks like this:</p>
<div class="multi-pre">
<pre><code class="language-java Java">@Override
public void onLoad() {
    CommandAPIBukkit.unregister(&quot;version&quot;, true, true);
}
</code></pre>
<pre><code class="language-kotlin Kotlin">override fun onLoad() {
    CommandAPIBukkit.unregister(&quot;version&quot;, false, true)
}
</code></pre>
</div>
<p>With this plugin, executing <code>/version</code> or <code>/bukkit:version</code> will give the unknown command message. Note that aliases like <code>/ver</code> and its namespaced version <code>/bukkit:ver</code> will still work. To remove aliases as well, you need to unregister each as its own command. For, <code>/ver</code>, that would mean calling <code>CommandAPIBukkit.unregister(&quot;ver&quot;, true, true)</code>.</p>
<h2 id="unregistering-a-vanilla-command---gamemode"><a class="header" href="#unregistering-a-vanilla-command---gamemode">Unregistering a Vanilla command - <code>/gamemode</code></a></h2>
<p><code>/gamemode</code> is a command provided by Vanilla Minecraft. Like the <a href="#unregistering-a-bukkit-command---version">previous example</a>, Vanilla commands are created in step 1, before plugins are loaded in step 3. For variety, we'll unregister the command in our plugin's <code>onEnable</code> -- step 4 -- but the same code would also work in <code>onLoad</code>.</p>
<p>Since this command exists in the Vanilla CommandDispatcher, we can use <code>CommandAPI#unregister</code>. That works the same as <code>CommandAPIBukkit#unregister</code> with <code>unregisterBukkit</code> set to <code>false</code>. We don't care about the namespace, so <code>unregisterNamespaces</code> will be <code>false</code>. That means we can use the simplest method, <code>CommandAPI.unregister(String commandName)</code>, since it sets <code>unregisterNamespaces</code> to <code>false</code> by default. All together, the code looks like this:</p>
<div class="multi-pre">
<pre><code class="language-java Java">@Override
public void onEnable() {
    CommandAPI.unregister(&quot;gamemode&quot;);
}
</code></pre>
<pre><code class="language-kotlin Kotlin">override fun onEnable() {
    CommandAPI.unregister(&quot;gamemode&quot;)
}
</code></pre>
</div>
<p>With this code, executing <code>/gamemode</code> will give the unknown command exception as expected. However, even though <code>unregisterNamespaces</code> was <code>false</code>, <code>/minecraft:gamemode</code> can also not be run. This happens because Vanilla commands are given their namespace in step 6, after our plugin has removed <code>/gamemode</code>.</p>
<p>When the server starts, <code>/gamemode</code> is created in step 2 inside the Vanilla CommandDispatcher. In step 4, our plugin is enabled and we remove the <code>/gamemode</code> command from that CommandDispatcher. After all the plugins enable, step 6 moves all commands in the Vanilla CommandDispatcher to the Bukkit CommandMap and gives them the <code>minecraft</code> namespace. Since <code>/gamemode</code> doesn't exist at this point, step 6 cannot create the <code>/minecraft:gamemode</code> command. So, even though <code>unregisterNamespaces</code> was <code>false</code>, <code>/minecraft:gamemode</code> doesn't exist anyway.</p>
<div class="example">
<h3 id="example---replacing-minecrafts-gamemode-command"><a class="header" href="#example---replacing-minecrafts-gamemode-command">Example - Replacing Minecraft's <code>/gamemode</code> command</a></h3>
<p>To replace a command, first unregister the original command, then register a new implementation for that command.</p>
<div class="multi-pre">
<pre><code class="language-java Java">@Override
public void onEnable() {
    CommandAPI.unregister(&quot;gamemode&quot;);

    // Register our new /gamemode, with survival, creative, adventure and spectator
    new CommandAPICommand(&quot;gamemode&quot;)
        .withArguments(new MultiLiteralArgument(&quot;gamemodes&quot;, &quot;survival&quot;, &quot;creative&quot;, &quot;adventure&quot;, &quot;spectator&quot;))
        .executes((sender, args) -&gt; {
            // Implementation of our /gamemode command
        })
        .register();
}
</code></pre>
<pre><code class="language-kotlin Kotlin">override fun onEnable() {
    CommandAPI.unregister(&quot;gamemode&quot;);

    // Register our new /gamemode, with survival, creative, adventure and spectator
    CommandAPICommand(&quot;gamemode&quot;)
        .withArguments(MultiLiteralArgument(&quot;gamemodes&quot;, &quot;survival&quot;, &quot;creative&quot;, &quot;adventure&quot;, &quot;spectator&quot;))
        .executes(CommandExecutor { sender, args -&gt;
            // Implementation of our /gamemode command
        })
        .register()
}
</code></pre>
</div>
<p>Now, when <code>/gamemode</code> is executed, it will use the new implementation defined using the CommandAPI.</p>
</div>
<h2 id="unregistering-a-plugin-command---luckpermsluckperms"><a class="header" href="#unregistering-a-plugin-command---luckpermsluckperms">Unregistering a Plugin command - <code>/luckperms:luckperms</code></a></h2>
<p>The <code>/luckperms</code> command is provided by the Bukkit <a href="https://luckperms.net/">LuckPerms</a> plugin. Plugin commands are created during step 4, immediately before calling the <code>onEnable</code> method of the respective plugin. In this case, unregistering the command in our own plugin's <code>onLoad</code> would not work, since the command wouldn't exist yet. We also have to make sure that our <code>onEnable</code> method is called after LuckPerm's. The best way to make sure that happens is to add LuckPerms as a <code>depend</code> or <code>softdepend</code> in our plugin's plugin.yml. You can read more about the different between <code>depend</code> and <code>softdepend</code> in <a href="https://www.spigotmc.org/wiki/plugin-yml/#optional-attributes">Spigot's documentation</a>, but that will look something like this:</p>
<pre><code class="language-yaml">name: MyPlugin
main: some.package.name.Main
version: 1.0
depend:
  - LuckPerms
</code></pre>
<p>Since plugin commands are stored in the Bukkit CommandMap, we need to use <code>CommandAPIBukkit#unregister</code> with <code>unregisterBukkit</code> set to <code>true</code>. For demonstration’s sake, we only want to unregister the namespaced version -- <code>/luckperms:luckperms</code> -- and leave <code>/luckperms</code> alone. To do this, give <code>&quot;luckperms:luckperms&quot;</code> as the <code>commandName</code>, and set <code>unregisterNamespaces</code> to <code>false</code>. All together, the code looks like this:</p>
<div class="multi-pre">
<pre><code class="language-java Java">@Override
public void onEnable() {
    CommandAPIBukkit.unregister(&quot;luckperms:luckperms&quot;, false, true);
}
</code></pre>
<pre><code class="language-kotlin Kotlin">override fun onEnable() {
    CommandAPIBukkit.unregister(&quot;luckperms:luckperms&quot;, false, true)
}
</code></pre>
</div>
<p>Executing <code>/luckperms</code> will work as normal, but <code>/luckperms:luckperms</code> will give the unknown command message.</p>
<h2 id="unregistering-a-commandapi-command"><a class="header" href="#unregistering-a-commandapi-command">Unregistering a CommandAPI command</a></h2>
<p>Unregistering a command created by the CommandAPI is similar to both unregistering a Vanilla command and a plugin command. Like a Vanilla command, CommandAPI commands are stored in the Vanilla CommandDispatcher, so they should be unregistered with <code>unregisterBukkit</code> set to <code>false</code>. Like plugin commands, they may be created in <code>onEnable</code>, so you need to make sure your plugin is enabled after the plugin that adds the command.</p>
<p>Unlike plugin commands, CommandAPI commands may be created in <code>onLoad</code>, as discussed in <a href="./commandregistration.html#command-loading-order">Command loading order</a>. That just means you may also be able to unregister the command in you own plugin's <code>onLoad</code>. As always, simply make sure you unregister a command after it is created, and it will be removed properly.</p>
<p>For our example, let's say we want to unregister the <code>/break</code> command created by the <a href="https://github.com/JorelAli/CommandAPI/tree/master/examples/bukkit/maven">Bukkit Maven Example Project</a> for the CommandAPI. If you look at that plugin's code, you can see that it registers the <code>/break</code> command in it's <code>onEnable</code> method. Therefore, we can unregister the command in our own plugin's <code>onEnable</code>, making sure that our plugin will enable second by adding ExamplePlugin as a <a href="https://www.spigotmc.org/wiki/plugin-yml/#optional-attributes"><code>depend</code> or <code>softdepend</code></a>.</p>
<pre><code class="language-yaml">name: MyPlugin
main: some.package.name.Main
version: 1.0
depend:
  - CommandAPI
  - ExamplePlugin
</code></pre>
<blockquote>
<p><strong>Developer's Note:</strong></p>
<p>If you can't find the code where a CommandAPI command is registered or just don't have access to the code of a plugin, you can still figure out when a command is registered. If you set <a href="./config.html#verbose-outputs"><code>verbose-outputs</code></a> to <code>true</code> in the CommandAPI's configuration, it will log command registration.</p>
<p>For the ExamplePlugin, setting <code>verbose-outputs</code> to <code>true</code> gives this:</p>
<pre><code class="language-log">[Server thread/INFO]: [ExamplePlugin] Enabling ExamplePlugin v0.0.1
[Server thread/INFO]: [CommandAPI] Registering command /break block&lt;LocationArgument&gt;
[Server thread/INFO]: [CommandAPI] Registering command /myeffect target&lt;PlayerArgument&gt; potion&lt;PotionEffectArgument&gt;
[Server thread/INFO]: [CommandAPI] Registering command /nbt nbt&lt;NBTCompoundArgument&gt;
</code></pre>
<p>You can see that the ExamplePlugin registers its commands when <code>onEnable</code> is called.</p>
</blockquote>
<p>In summary, we will unregister the <code>/break</code> command in our plugin's <code>onEnable</code>. We added Example plugin to the <code>depend</code> list in our plugin.yml so that our <code>onEnable</code> method runs second. <code>unregisterNamespaces</code> and <code>unregisterBukkit</code> will be set to <code>false</code>, and those are the default values, so we can simply use <code>CommandAPI.unregister(String commandName)</code>. All together, the code looks like this:</p>
<div class="multi-pre">
<pre><code class="language-java Java">@Override
public void onEnable() {
    CommandAPI.unregister(&quot;break&quot;);
}
</code></pre>
<pre><code class="language-kotlin Kotlin">override fun onEnable() {
    CommandAPI.unregister(&quot;break&quot;)
}
</code></pre>
</div>
<p>Now, when you try to execute <code>/break</code>, you will just get the unknown command message as if it never existed.</p>
<h2 id="special-case-unregistering-bukkits-help"><a class="header" href="#special-case-unregistering-bukkits-help">Special case: Unregistering Bukkit's <code>/help</code></a></h2>
<p>If you look at the sequence of events at the top of this page, you might notice that Bukkit's <code>/help</code> command gets its own place in step 5. Unlike the other <a href="#unregistering-a-bukkit-command---version">Bukkit commands</a>, <code>/help</code> is special and gets registered after plugins are loaded and enabled (don't ask, I don't know why :P). That means unregistering <code>/help</code> in <code>onLoad</code> or <code>onEnable</code> does not work, since the command doesn't exist yet.</p>
<p>In order to run our unregister task after the server is enabled, we can use Bukkit's <a href="https://bukkit.fandom.com/wiki/Scheduler_Programming">Scheduler API</a>. There are many ways to set up and run a task, and this should work in whatever way you like. You can even give the task zero delay, since Bukkit only starts processing tasks after the server is enabled.</p>
<p>Since <code>/help</code> is in the Bukkit CommandMap, we need to use <code>CommandAPIBukkit#unregister</code> with <code>unregisterBukkit</code> set to <code>true</code>. We'll leave <code>/bukkit:help</code> alone, so <code>unregisterNamespaces</code> will be <code>false</code>. All together, we can unregister Bukkit's <code>/help</code> command with this code:</p>
<div class="multi-pre">
<pre><code class="language-java Java">@Override
public void onEnable() {
    new BukkitRunnable() {
        @Override
        public void run() {
            CommandAPIBukkit.unregister(&quot;help&quot;, false, true);
        }
    }.runTaskLater(this, 0);
}
</code></pre>
<pre><code class="language-kotlin Kotlin">override fun onEnable() {
    object : BukkitRunnable() {
        override fun run() {
            CommandAPIBukkit.unregister(&quot;help&quot;, false, true)
        }
    }.runTaskLater(this, 0)
}
</code></pre>
</div>
<p>Funnily, if you try to execute <code>/help</code>, the server will still tell you: <code>Unknown command. Type &quot;/help&quot; for help.</code>. Luckily, <code>unregisterNamespaces</code> was <code>false</code>, so you can still use <code>/bukkit:help</code> to figure out your problem.</p>
<h2 id="special-case-unregistering-only-minecraftgamemode"><a class="header" href="#special-case-unregistering-only-minecraftgamemode">Special case: Unregistering only <code>/minecraft:gamemode</code></a></h2>
<p>In the earlier example for <a href="#unregistering-a-vanilla-command---gamemode">Unregistering <code>/gamemode</code></a>, even though <code>unregisterNamespaces</code> was <code>false</code>, the <code>/minecraft:gamemode</code> command was also not executable. As explained up there, this happens because the namespaced version of commands in the Vanilla CommandDispatcher are not created until after plugins are loaded and enabled. Since we unregistered <code>/gamemode</code> in <code>onEnable</code>, when the time came for the server to transfer Vanilla commands into the Bukkit CommandMap, it didn't know to create the <code>minecraft:gamemode</code> command. Consequently, this means we cannot normally remove only the <code>/minecraft:gamemode</code> command without also unregistering <code>/gamemode</code>.</p>
<p>Of course, it is still possible to only unregister <code>/minecraft:gamemode</code> and the namespaced versions of other Vanilla commands. As always, in order to unregister a command, you have to unregister after the command is created. So, we just need to unregister <code>/minecraft:gamemode</code> after the server is enabled. Like the <a href="#special-case-unregistering-bukkits-help">previous special case</a>, we can use Bukkit's <a href="https://bukkit.fandom.com/wiki/Scheduler_Programming">Scheduler API</a> to run our unregister task after the server is enabled.</p>
<p>While <code>/minecraft:gamemode</code> only exists in the Bukkit CommandMap, it is the namespaced version of the Vanilla <code>/gamemode</code> command, so it is considered a Vanilla command. That means <code>unregisterBukkit</code> should be <code>false</code>, which is what it defaults to when using <code>CommandAPI#unregister</code>. The CommandAPI understands that once the server is enabled Vanilla commands will have been copied to the CommandMap, so it will be able to find <code>/minecraft:gamemode</code></p>
<p>Finally, <code>unregisterNamespaces</code> should be <code>false</code>, and since that's the default value we don't have to include it. All together, the code looks like this:</p>
<div class="multi-pre">
<pre><code class="language-java Java">@Override
public void onEnable() {
    new BukkitRunnable() {
        @Override
        public void run() {
            CommandAPI.unregister(&quot;minecraft:gamemode&quot;);
        }
    }.runTaskLater(this, 0);
}
</code></pre>
<pre><code class="language-kotlin Kotlin">override fun onEnable() {
    object : BukkitRunnable() {
        override fun run() {
            CommandAPI.unregister(&quot;minecraft:gamemode&quot;)
        }
    }.runTaskLater(this, 0)
}
</code></pre>
</div>
<p>With this code, <code>/gamemode</code> will execute as normal, but <code>/minecraft:gamemode</code> will give the unknown command message.</p>
<div class="warning">
<p><strong>Developer's Note:</strong></p>
<p>Doing the opposite action here -- only unregistering <code>/gamemode</code> but keeping <code>/minecraft:gamemode</code> -- is not recommended. That would be the following code, where <code>commandName</code> is <code>&quot;gamemode&quot;</code> (or any command in the Vanilla CommandDispatcher), and <code>unregisterNamespaces</code> is <code>false</code>:</p>
<div class="multi-pre">
<pre><code class="language-java Java">// NOT RECOMMENDED
@Override
public void onEnable() {
    new BukkitRunnable() {
        @Override
        public void run() {
            CommandAPI.unregister(&quot;gamemode&quot;);
        }
    }.runTaskLater(this, 0);
}
</code></pre>
<pre><code class="language-kotlin Kotlin">// NOT RECOMMENDED
override fun onEnable() {
    object : BukkitRunnable() {
        override fun run() {
            CommandAPI.unregister(&quot;gamemode&quot;)
        }
    }.runTaskLater(this, 0)
}
</code></pre>
</div>
<p>The expected outcome of this code is that <code>/minecraft:gamemode</code> would work as expected, and <code>/gamemode</code> would give the command not found message. However, that is only true for the player's commands. If you try to use <code>/minecraft:gamemode</code> in the console, it <em>will not work</em> properly. Specifically, while you can tab-complete the command's label, <code>minecraft:gamemode</code> the command's arguments will not have any suggestions. If you try to execute <code>/minecraft:gamemode</code> in the console, it will always tell you your command is unknown or incomplete.</p>
<p>The main point is that if you ever try to unregister a Vanilla command after the server is enabled, the namespaced version of that command will break for the console. To avoid this issue, always set <code>unregisterNamespaces</code> to <code>true</code> if <code>unregisterBukkit</code> is <code>false</code> when unregistering commands after the server is enabled.</p>
<div class="multi-pre">
<pre><code class="language-java Java">@Override
public void onEnable() {
    new BukkitRunnable() {
        @Override
        public void run() {
            CommandAPI.unregister(&quot;gamemode&quot;, true);
        }
    }.runTaskLater(this, 0);
}
</code></pre>
<pre><code class="language-kotlin Kotlin">override fun onEnable() {
    object : BukkitRunnable() {
        override fun run() {
            CommandAPI.unregister(&quot;gamemode&quot;, true)
        }
    }.runTaskLater(this, 0)
}
</code></pre>
</div>
</div>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="commandregistration.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fas fa-chevron-left"></i>
                            </a>

                            <a rel="next" href="commandexecutors.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fas fa-chevron-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="commandregistration.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fas fa-chevron-left"></i>
                    </a>

                    <a rel="next" href="commandexecutors.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fas fa-chevron-right"></i>
                    </a>
            </nav>

        </div>




        <script type="text/javascript">
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        <script type="text/javascript" src="sidebar.js"></script>
        <script type="text/javascript" src="mccmd.js"></script>
        <script type="text/javascript" src="kotlin-dsl.js"></script>
        <script type="text/javascript" src="jszip.min.js"></script>
        <script type="text/javascript" src="yaml.min.js"></script>
        <script type="text/javascript" src="pluginyml.js"></script>


    </body>
</html>
