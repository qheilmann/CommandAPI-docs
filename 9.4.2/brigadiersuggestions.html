<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js rust">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Brigadier Suggestions - CommandAPI Documentation v9.4.1</title>


        <!-- Custom HTML head -->
        
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="fontawesome/css/fontawesome.css">
        <link rel="stylesheet" href="fontawesome/css/brands.css">
        <link rel="stylesheet" href="fontawesome/css/solid.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="style.css">

        <!-- MathJax -->
        <script async type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "rust";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('rust')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="intro.html">Introduction</a></li><li class="spacer"></li><li class="chapter-item expanded affix "><li class="part-title">Server Owner Usage</li><li class="chapter-item expanded "><a href="installation.html">Installation for server owners</a></li><li class="chapter-item expanded "><a href="config.html">Configuration for server owners</a></li><li class="chapter-item expanded "><a href="conversionforowners.html">Command conversion</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="conversionforownerssingle.html">Single command conversion</a></li><li class="chapter-item expanded "><a href="conversionforownerssingleargs.html">Single command conversion (with arguments)</a></li><li class="chapter-item expanded "><a href="conversionentityselectors.html">Entity selectors</a></li></ol></li><li class="chapter-item expanded "><a href="skippingproxysenders.html">Skipping proxy senders</a></li><li class="spacer"></li><li class="chapter-item expanded affix "><li class="part-title">CommandAPI Setup</li><li class="chapter-item expanded "><a href="setup_dev.html">Setting up your development environment</a></li><li class="chapter-item expanded "><a href="setup_shading.html">Shading the CommandAPI in your plugins</a></li><li class="chapter-item expanded "><a href="setup_annotations.html">Using the annotation system</a></li><li class="chapter-item expanded affix "><li class="part-title">Creating Commands</li><li class="chapter-item expanded "><a href="commandregistration.html">Command registration</a></li><li class="chapter-item expanded "><a href="commandunregistration.html">Command unregistration</a></li><li class="chapter-item expanded "><a href="commandexecutors.html">Command executors</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="normalexecutors.html">Normal command executors</a></li><li class="chapter-item expanded "><a href="proxysender.html">Proxied commandsenders</a></li><li class="chapter-item expanded "><a href="native.html">Native commandsenders</a></li><li class="chapter-item expanded "><a href="resultingcommandexecutors.html">Resulting command executors</a></li><li class="chapter-item expanded "><a href="commandfailures.html">Handling command failures</a></li></ol></li><li class="chapter-item expanded "><a href="arguments.html">Command arguments</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="commandarguments.html">CommandArguments</a></li><li class="chapter-item expanded "><a href="optional_arguments.html">Optional arguments</a></li><li class="chapter-item expanded "><a href="listed.html">Listed arguments</a></li><li class="chapter-item expanded "><a href="argumentsuggestions.html">Argument suggestions</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="suggestionsinfo.html">The SuggestionsInfo record</a></li><li class="chapter-item "><a href="stringargumentsuggestions.html">String argument suggestions</a></li><li class="chapter-item "><a href="safeargumentsuggestions.html">Safely typed argument suggestions</a></li><li class="chapter-item "><a href="tooltips.html">Argument suggestions with tooltips</a></li><li class="chapter-item "><a href="asyncsuggestions.html">Asynchronous suggestions</a></li></ol></li><li class="chapter-item expanded "><a href="argumenttypes.html">Argument types</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="argument_primitives.html">Primitive arguments</a></li><li class="chapter-item "><a href="argument_range.html">Ranged arguments</a></li><li class="chapter-item "><a href="argument_strings.html">String arguments</a></li><li class="chapter-item "><a href="category_positional_arguments.html">Positional arguments</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="argument_locations.html">Location arguments</a></li><li class="chapter-item "><a href="argument_rotation.html">Rotation arguments</a></li><li class="chapter-item "><a href="argument_axis.html">AxisArguments</a></li></ol></li><li class="chapter-item "><a href="argument_chats.html">Chat arguments</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="argument_chat_spigot.html">Spigot chat arguments</a></li><li class="chapter-item "><a href="argument_chat_adventure.html">Adventure chat arguments</a></li><li class="chapter-item "><a href="chatpreview.html">Chat preview</a></li></ol></li><li class="chapter-item "><a href="argument_entities.html">Entity & player arguments</a></li><li class="chapter-item "><a href="category_scoreboard_arguments.html">Scoreboard arguments</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="argument_scoreboards.html">Scoreboard arguments</a></li><li class="chapter-item "><a href="argument_objectives.html">Objective arguments</a></li><li class="chapter-item "><a href="argument_team.html">Team arguments</a></li></ol></li><li class="chapter-item "><a href="category_miscellaneous_arguments.html">Miscellaneous arguments</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="argument_angle.html">Angle arguments</a></li><li class="chapter-item "><a href="advancementargument.html">Advancement arguments</a></li><li class="chapter-item "><a href="argument_biome.html">Biome arguments</a></li><li class="chapter-item "><a href="argument_blockstate.html">BlockState arguments</a></li><li class="chapter-item "><a href="argument_enchantment.html">Enchantment arguments</a></li><li class="chapter-item "><a href="argument_itemstack.html">Itemstack arguments</a></li><li class="chapter-item "><a href="argument_loottable.html">LootTable argument</a></li><li class="chapter-item "><a href="argument_mathoperation.html">MathOperation arguments</a></li><li class="chapter-item "><a href="argument_namespacedkey.html">NamespacedKey arguments</a></li><li class="chapter-item "><a href="argument_particles.html">Particle arguments</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="argument_particle_old.html">Particle data (before 1.20.5)</a></li><li class="chapter-item "><a href="argument_particle_new.html">Particle data (1.20.5+)</a></li></ol></li><li class="chapter-item "><a href="argument_potion.html">Potion effect arguments</a></li><li class="chapter-item "><a href="argument_recipe.html">Recipe arguments</a></li><li class="chapter-item "><a href="argument_sound.html">Sound arguments</a></li><li class="chapter-item "><a href="argument_time.html">Time arguments</a></li><li class="chapter-item "><a href="argument_uuid.html">UUID arguments</a></li><li class="chapter-item "><a href="argument_world.html">World arguments</a></li></ol></li><li class="chapter-item "><a href="predicateargs.html">Predicate arguments</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="argument_blockpredicate.html">Block predicate arguments</a></li><li class="chapter-item "><a href="argument_itemstackpredicate.html">ItemStack predicate arguments</a></li></ol></li><li class="chapter-item "><a href="argument_nbt.html">NBT arguments</a></li><li class="chapter-item "><a href="category_literal_arguments.html">Literal arguments</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="argument_literal.html">Literal arguments</a></li><li class="chapter-item "><a href="argument_multiliteral.html">Multi literal arguments</a></li></ol></li><li class="chapter-item "><a href="argument_list.html">List arguments</a></li><li class="chapter-item "><a href="argument_map.html">Map arguments</a></li><li class="chapter-item "><a href="argument_command.html">Command arguments</a></li><li class="chapter-item "><a href="argument_custom.html">Custom arguments</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="functions.html">Functions & Tags</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="functionsetup.html">Setting up functions & tags</a></li><li class="chapter-item expanded "><a href="simplefunctionwrapper.html">The SimpleFunctionWrapper class</a></li><li class="chapter-item expanded "><a href="functionwrapper.html">The FunctionWrapper class</a></li><li class="chapter-item expanded "><a href="argument_function.html">Function arguments</a></li></ol></li><li class="chapter-item expanded "><a href="permissions.html">Permissions</a></li><li class="chapter-item expanded "><a href="requirements.html">Requirements</a></li><li class="chapter-item expanded "><a href="aliases.html">Aliases</a></li><li class="chapter-item expanded "><a href="help.html">Help</a></li><li class="chapter-item expanded "><a href="subcommands.html">Subcommands</a></li><li class="chapter-item expanded "><a href="commandtrees.html">Command trees</a></li><li class="chapter-item expanded affix "><li class="part-title">Annotation-based Commands</li><li class="chapter-item expanded "><a href="annotationsintro.html">Annotation-based commands</a></li><li class="chapter-item expanded "><a href="annotations.html">Annotations</a></li><li class="chapter-item expanded "><a href="registeringannotations.html">Registering annotation-based commands</a></li><li class="chapter-item expanded affix "><li class="part-title">Kotlin-based Commands</li><li class="chapter-item expanded "><a href="kotlinintro.html">Kotlin-based commands</a></li><li class="chapter-item expanded "><a href="kotlindsl.html">Using the DSL</a></li><li class="chapter-item expanded "><a href="delegated_properties.html">Delegated properties</a></li><li class="spacer"></li><li class="chapter-item expanded affix "><li class="part-title">Velocity</li><li class="chapter-item expanded "><a href="velocity_intro.html">Velocity</a></li><li class="spacer"></li><li class="chapter-item expanded affix "><li class="part-title">CommandAPI Utilities</li><li class="chapter-item expanded "><a href="conversion.html">Command conversion</a></li><li class="chapter-item expanded "><a href="reloading.html">Plugin reloading</a></li><li class="chapter-item expanded affix "><li class="part-title">Internal CommandAPI</li><li class="chapter-item expanded "><a href="internal.html">Internal CommandAPI</a></li><li class="chapter-item expanded "><a href="brigadier.html">Brigadier + CommandAPI</a></li><li class="chapter-item expanded "><a href="brigadiersuggestions.html" class="active">Brigadier Suggestions</a></li><li class="spacer"></li><li class="chapter-item expanded affix "><li class="part-title">Java Tips</li><li class="chapter-item expanded "><a href="predicatetips.html">Predicate tips</a></li><li class="spacer"></li><li class="chapter-item expanded affix "><li class="part-title">CommandAPI Contribution</li><li class="chapter-item expanded "><a href="contributionintro.html">Introduction</a></li><li class="chapter-item expanded "><a href="projectstructure.html">Project Structure</a></li><li class="spacer"></li><li class="chapter-item expanded "><a href="upgrading.html">Upgrading guide</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="upgrading_old.html">Upgrading guide (pre-9.0.0)</a></li></ol></li><li class="chapter-item expanded "><a href="faq.html">FAQ</a></li><li class="chapter-item expanded affix "><a href="incompatibleversions.html">Incompatible version information</a></li><li class="chapter-item expanded affix "><a href="troubleshooting.html">Troubleshooting</a></li><li class="spacer"></li><li class="chapter-item expanded affix "><a href="afterword.html">Afterword</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fas fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fas fa-palette"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="skepter">Skepter Likes Purple</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fas fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">CommandAPI Documentation v9.4.1</h1>

                    <div class="right-buttons">
                        <a href="https://www.jorel.dev/CommandAPI/" title="Back to main CommandAPI page" aria-label="Back to main CommandAPI page">
                            <i id="home-button" class="fas fa-home"></i>
                        </a>
                        <a href="https://ko-fi.com/jorelali" title="Donate (ko-fi)" aria-label="Donate (ko-fi)">
                            <i id="donate-button" class="fas fa-donate"></i>
                        </a>
                        <a href="https://discord.com/invite/G4SzSxZ" title="Discord" aria-label="Discord">
                            <i id="discord-button" class="fab fa-discord"></i>
                        </a>
                        <a href="https://github.com/JorelAli/CommandAPI" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fab fa-github"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <!-- Page table of contents -->
                        <div class="sidetoc"><nav class="pagetoc"></nav></div>
                        
                        <h1 id="brigadier-suggestions"><a class="header" href="#brigadier-suggestions">Brigadier Suggestions</a></h1>
<p>As described in <a href="./argumentsuggestions.html#the-argumentsuggestions-interface">The ArgumentSuggestions interface</a>, the <code>ArgumentSuggestions</code> interface has the following default method:</p>
<pre><code class="language-java">@FunctionalInterface
public interface ArgumentSuggestions&lt;CommandSender&gt; {

    /**
     * Create a {@link CompletableFuture} resolving onto a brigadier {@link Suggestions} object.
     * @param info The suggestions info
     * @param builder The Brigadier {@link SuggestionsBuilder} object
     * @return a {@link CompletableFuture} resolving onto a brigadier {@link Suggestions} object.
     *
     * @throws CommandSyntaxException if there is an error making suggestions
     */
    CompletableFuture&lt;Suggestions&gt; suggest(SuggestionInfo&lt;CommandSender&gt; info, SuggestionsBuilder builder)
        throws CommandSyntaxException;

}
</code></pre>
<p>This allows you to use Brigadier's <code>SuggestionsBuilder</code> and <code>Suggestions</code> classes to create more powerful suggestions beyond the basic capabilities of the CommandAPI.</p>
<p>In order to use this, you will need the Brigadier dependency, which you can find under the <a href="https://github.com/Mojang/brigadier#installation">Brigadier installation instructions</a>.</p>
<div class="example">
<h3 id="example---making-an-emoji-broadcasting-message"><a class="header" href="#example---making-an-emoji-broadcasting-message">Example - Making an emoji broadcasting message</a></h3>
<p>Say we want to let users broadcast a message, but also allow them to enter emojis into the message they're typing:</p>
<p><img src="./images/emojimsg.gif" alt="A gif showcasing a command where emojis are suggested when typing a message" /></p>
<p>For this command, we'll use a <code>GreedyStringArgument</code> as if we were making a generic broadcasted message. We create a map of emojis to their descriptions to use as tooltips and then we use Brigadier to display the suggestions at the end of the message where the cursor is.</p>
<div class="multi-pre">
<pre><code class="language-java Java">Map&lt;String, String&gt; emojis = new HashMap&lt;&gt;();
emojis.put(&quot;☻&quot;, &quot;smile&quot;);
emojis.put(&quot;❤&quot;, &quot;heart&quot;);
emojis.put(&quot;🔥&quot;, &quot;fire&quot;);
emojis.put(&quot;★&quot;, &quot;star&quot;);
emojis.put(&quot;☠&quot;, &quot;death&quot;);
emojis.put(&quot;⚠&quot;, &quot;warning&quot;);
emojis.put(&quot;☀&quot;, &quot;sun&quot;);
emojis.put(&quot;☺&quot;, &quot;smile&quot;);
emojis.put(&quot;☹&quot;, &quot;frown&quot;);
emojis.put(&quot;✉&quot;, &quot;mail&quot;);
emojis.put(&quot;☂&quot;, &quot;umbrella&quot;);
emojis.put(&quot;✘&quot;, &quot;cross&quot;);
emojis.put(&quot;♪&quot;, &quot;music note (eighth)&quot;);
emojis.put(&quot;♬&quot;, &quot;music note (beamed sixteenth)&quot;);
emojis.put(&quot;♩&quot;, &quot;music note (quarter)&quot;);
emojis.put(&quot;♫&quot;, &quot;music note (beamed eighth)&quot;);
emojis.put(&quot;☄&quot;, &quot;comet&quot;);
emojis.put(&quot;✦&quot;, &quot;star&quot;);
emojis.put(&quot;🗡&quot;, &quot;sword&quot;);
emojis.put(&quot;🪓&quot;, &quot;axe&quot;);
emojis.put(&quot;🔱&quot;, &quot;trident&quot;);
emojis.put(&quot;🎣&quot;, &quot;fishing rod&quot;);
emojis.put(&quot;🏹&quot;, &quot;bow&quot;);
emojis.put(&quot;⛏&quot;, &quot;pickaxe&quot;);
emojis.put(&quot;🍖&quot;, &quot;food&quot;);

Argument&lt;String&gt; messageArgument = new GreedyStringArgument(&quot;message&quot;)
    .replaceSuggestions((info, builder) -&gt; {
        // Only display suggestions at the very end character
        builder = builder.createOffset(builder.getStart() + info.currentArg().length());

        // Suggest all the emojis!
        for (Entry&lt;String, String&gt; str : emojis.entrySet()) {
            builder.suggest(str.getKey(), new LiteralMessage(str.getValue()));
        }

        return builder.buildFuture();
    });

new CommandAPICommand(&quot;emoji&quot;)
    .withArguments(messageArgument)
    .executes((sender, args) -&gt; {
        Bukkit.broadcastMessage((String) args.get(&quot;message&quot;));
    })
    .register();
</code></pre>
<pre><code class="language-kotlin Kotlin">val emojis = mapOf(
    &quot;☻&quot; to &quot;smile&quot;,
    &quot;❤&quot; to &quot;heart&quot;,
    &quot;🔥&quot; to &quot;fire&quot;,
    &quot;★&quot; to &quot;star&quot;,
    &quot;☠&quot; to &quot;death&quot;,
    &quot;⚠&quot; to &quot;warning&quot;,
    &quot;☀&quot; to &quot;sun&quot;,
    &quot;☺&quot; to &quot;smile&quot;,
    &quot;☹&quot; to &quot;frown&quot;,
    &quot;✉&quot; to &quot;mail&quot;,
    &quot;☂&quot; to &quot;umbrella&quot;,
    &quot;✘&quot; to &quot;cross&quot;,
    &quot;♪&quot; to &quot;music note (eighth)&quot;,
    &quot;♬&quot; to &quot;music note (beamed sixteenth)&quot;,
    &quot;♩&quot; to &quot;music note (quarter)&quot;,
    &quot;♫&quot; to &quot;music note (beamed eighth)&quot;,
    &quot;☄&quot; to &quot;comet&quot;,
    &quot;✦&quot; to &quot;star&quot;,
    &quot;🗡&quot; to &quot;sword&quot;,
    &quot;🪓&quot; to &quot;axe&quot;,
    &quot;🔱&quot; to &quot;trident&quot;,
    &quot;🎣&quot; to &quot;fishing rod&quot;,
    &quot;🏹&quot; to &quot;bow&quot;,
    &quot;⛏&quot; to &quot;pickaxe&quot;,
    &quot;🍖&quot; to &quot;food&quot;
)

val messageArgument = GreedyStringArgument(&quot;message&quot;)
    .replaceSuggestions { info, builder -&gt;
        // Only display suggestions at the very end character
        val newBuilder = builder.createOffset(builder.start + info.currentArg().length)

        // Suggest all the emojis!
        emojis.forEach { (emoji, description) -&gt;
            newBuilder.suggest(emoji, LiteralMessage(description))
        }

        newBuilder.buildFuture()
    }

CommandAPICommand(&quot;emoji&quot;)
    .withArguments(messageArgument)
    .executes(CommandExecutor { _, args -&gt;
        Bukkit.broadcastMessage(args[&quot;message&quot;] as String)
    })
    .register()
</code></pre>
</div>
<p>In this example, we simply create the <code>GreedyStringArgument</code> and use <code>replaceSuggestions()</code> to specify our suggestion rules. We create an offset using the current builder to make suggestions start at the last character (the current builder start <code>builder.getStart()</code> and the current length of what the user has already typed <code>info.currentArg().length()</code>). Finally, we build the suggestions with <code>builder.buildFuture()</code> and then register our command as normal.</p>
</div>
<div class="example">
<h3 id="example---using-a-minecraft-command-as-an-argument"><a class="header" href="#example---using-a-minecraft-command-as-an-argument">Example - Using a Minecraft command as an argument</a></h3>
<blockquote>
<p><strong>Developer's Note:</strong></p>
<p>This example has been superseded by the <a href="./argument_command.html">Command argument</a>. This example is still present as it gives an example of much more complicated brigadier suggestions which may be useful for readers!</p>
</blockquote>
<p>Courtesy of <a href="https://github.com/469512345">469512345</a>, the following example shows how using Brigadier's suggestions and parser can be combined with the CommandAPI to create an argument which suggests valid Minecraft commands. This could be used for example as a <code>sudo</code> command, to run a command as another player.</p>
<p><img src="./images/commandargument.gif" alt="A gif showcasing a command suggestion for the /give command" /></p>
<p>For this command, we'll use a <code>GreedyStringArgument</code> because that allows users to enter any combination of characters (which therefore, allows users to enter any command). First, we start by defining the suggestions that we'll use for the <code>GreedyStringArgument</code>. We'll use the <code>ArgumentSuggestions</code> functional interface described above:</p>
<div class="multi-pre">
<pre><code class="language-java Java">ArgumentSuggestions&lt;CommandSender&gt; commandSuggestions = (info, builder) -&gt; {
    // The current argument, which is a full command
    String arg = info.currentArg();

    // Identify the position of the current argument
    int start;
    if (arg.contains(&quot; &quot;)) {
        // Current argument contains spaces - it starts after the last space and after the start of this argument.
        start = builder.getStart() + arg.lastIndexOf(' ') + 1;
    } else {
        // Input starts at the start of this argument
        start = builder.getStart();
    }
    
    // Parse command using brigadier
    ParseResults&lt;?&gt; parseResults = Brigadier.getCommandDispatcher()
        .parse(info.currentArg(), Brigadier.getBrigadierSourceFromCommandSender(info.sender()));
    
    // Intercept any parsing errors indicating an invalid command
    if(!parseResults.getExceptions().isEmpty()) {
        CommandSyntaxException exception = parseResults.getExceptions().values().iterator().next();
        // Raise the error, with the cursor offset to line up with the argument
        throw new CommandSyntaxException(exception.getType(), exception.getRawMessage(), exception.getInput(), exception.getCursor() + start);
    }

    return Brigadier
        .getCommandDispatcher()
        .getCompletionSuggestions(parseResults)
        .thenApply(suggestionsObject -&gt; {
            // Brigadier's suggestions
            Suggestions suggestions = (Suggestions) suggestionsObject;

            return new Suggestions(
                // Offset the index range of the suggestions by the start of the current argument
                new StringRange(start, start + suggestions.getRange().getLength()),
                // Copy the suggestions
                suggestions.getList()
            );
        });
};
</code></pre>
<pre><code class="language-kotlin Kotlin">val commandSuggestions: ArgumentSuggestions&lt;CommandSender&gt; = ArgumentSuggestions { info, builder -&gt;
    // The current argument, which is a full command
    val arg: String = info.currentArg()

    // Identify the position of the current argument
    var start = if (arg.contains(&quot; &quot;)) {
        // Current argument contains spaces - it starts after the last space and after the start of this argument.
        builder.start + arg.lastIndexOf(' ') + 1
    } else {
        // Input starts at the start of this argument
        builder.start
    }

    // Parse command using brigadier
    val parseResults: ParseResults&lt;*&gt; = Brigadier.getCommandDispatcher()
        .parse(info.currentArg(), Brigadier.getBrigadierSourceFromCommandSender(info.sender))

    // Intercept any parsing errors indicating an invalid command
    for ((_, exception) in parseResults.exceptions) {
        // Raise the error, with the cursor offset to line up with the argument
        throw CommandSyntaxException(exception.type, exception.rawMessage, exception.input, exception.cursor + start)
    }

    val completableFutureSuggestions: CompletableFuture&lt;Suggestions&gt; =
        Brigadier.getCommandDispatcher().getCompletionSuggestions(parseResults) as CompletableFuture&lt;Suggestions&gt;

    completableFutureSuggestions.thenApply { suggestions: Suggestions -&gt;
        Suggestions(
            // Offset the index range of the suggestions by the start of the current argument
            StringRange(start, start + suggestions.range.length),
            // Copy the suggestions
            suggestions.list
        )
    }
}
</code></pre>
</div>
<p>There's a lot to unpack there, but it's generally split up into 4 key sections:</p>
<ul>
<li>
<p><strong>Finding the start of the argument</strong>. We find the start of the argument so we know where the beginning of our command suggestion is. This is done easily using <code>builder.getStart()</code>, but we also have to take into account any spaces if our command argument contains spaces.</p>
</li>
<li>
<p><strong>Parsing the command argument</strong>. We make use of Brigadier's <code>parse()</code> method to parse the argument and generate some <code>ParseResults</code>.</p>
</li>
<li>
<p><strong>Reporting parsing errors</strong>. This is actually an optional step, but in general it's good practice to handle exceptions stored in <code>ParseResults</code>. While <a href="https://github.com/Mojang/brigadier/blob/master/src/main/java/com/mojang/brigadier/CommandDispatcher.java#L599">Brigadier doesn't actually handle suggestion exceptions</a>, this has been included in this example to showcase exception handling.</p>
</li>
<li>
<p><strong>Generating suggestions from parse results</strong>. We use our parse results with Brigadier's <code>getCompletionSuggestions()</code> method to generate some suggestions based on the parse results and the suggestion string range.</p>
</li>
</ul>
<p>Now that we've declared our arguments suggestions, we can then create our simple command with the following syntax:</p>
<pre><code class="language-mccmd">/commandargument &lt;command&gt;
</code></pre>
<p>We use the command suggestions declared above by using the <code>replaceSuggestions</code> method in our <code>GreedyStringArgument</code>, and write a simple executor which runs the command that the user provided:</p>
<div class="multi-pre">
<pre><code class="language-java Java">new CommandAPICommand(&quot;commandargument&quot;)
    .withArguments(new GreedyStringArgument(&quot;command&quot;).replaceSuggestions(commandSuggestions))
    .executes((sender, args) -&gt; {
        // Run the command using Bukkit.dispatchCommand()
        Bukkit.dispatchCommand(sender, (String) args.get(&quot;command&quot;));
    }).register();
</code></pre>
<pre><code class="language-kotlin Kotlin">CommandAPICommand(&quot;commandargument&quot;)
    .withArguments(GreedyStringArgument(&quot;command&quot;).replaceSuggestions(commandSuggestions))
    .executes(CommandExecutor { sender, args -&gt;
        // Run the command using Bukkit.dispatchCommand()
        Bukkit.dispatchCommand(sender, args[&quot;command&quot;] as String)
    })
    .register()
</code></pre>
</div>
</div>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="brigadier.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fas fa-chevron-left"></i>
                            </a>

                            <a rel="next" href="predicatetips.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fas fa-chevron-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="brigadier.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fas fa-chevron-left"></i>
                    </a>

                    <a rel="next" href="predicatetips.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fas fa-chevron-right"></i>
                    </a>
            </nav>

        </div>




        <script type="text/javascript">
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        <script type="text/javascript" src="sidebar.js"></script>
        <script type="text/javascript" src="mccmd.js"></script>
        <script type="text/javascript" src="kotlin-dsl.js"></script>
        <script type="text/javascript" src="jszip.min.js"></script>
        <script type="text/javascript" src="yaml.min.js"></script>
        <script type="text/javascript" src="pluginyml.js"></script>


    </body>
</html>
