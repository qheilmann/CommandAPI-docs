<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js rust">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Shading the CommandAPI in your plugins - CommandAPI Documentation v9.4.1</title>


        <!-- Custom HTML head -->
        
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="fontawesome/css/fontawesome.css">
        <link rel="stylesheet" href="fontawesome/css/brands.css">
        <link rel="stylesheet" href="fontawesome/css/solid.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="style.css">

        <!-- MathJax -->
        <script async type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "rust";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('rust')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="intro.html">Introduction</a></li><li class="spacer"></li><li class="chapter-item expanded affix "><li class="part-title">Server Owner Usage</li><li class="chapter-item expanded "><a href="installation.html">Installation for server owners</a></li><li class="chapter-item expanded "><a href="config.html">Configuration for server owners</a></li><li class="chapter-item expanded "><a href="conversionforowners.html">Command conversion</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="conversionforownerssingle.html">Single command conversion</a></li><li class="chapter-item expanded "><a href="conversionforownerssingleargs.html">Single command conversion (with arguments)</a></li><li class="chapter-item expanded "><a href="conversionentityselectors.html">Entity selectors</a></li></ol></li><li class="chapter-item expanded "><a href="skippingproxysenders.html">Skipping proxy senders</a></li><li class="spacer"></li><li class="chapter-item expanded affix "><li class="part-title">CommandAPI Setup</li><li class="chapter-item expanded "><a href="setup_dev.html">Setting up your development environment</a></li><li class="chapter-item expanded "><a href="setup_shading.html" class="active">Shading the CommandAPI in your plugins</a></li><li class="chapter-item expanded "><a href="setup_annotations.html">Using the annotation system</a></li><li class="chapter-item expanded affix "><li class="part-title">Creating Commands</li><li class="chapter-item expanded "><a href="commandregistration.html">Command registration</a></li><li class="chapter-item expanded "><a href="commandunregistration.html">Command unregistration</a></li><li class="chapter-item expanded "><a href="commandexecutors.html">Command executors</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="normalexecutors.html">Normal command executors</a></li><li class="chapter-item expanded "><a href="proxysender.html">Proxied commandsenders</a></li><li class="chapter-item expanded "><a href="native.html">Native commandsenders</a></li><li class="chapter-item expanded "><a href="resultingcommandexecutors.html">Resulting command executors</a></li><li class="chapter-item expanded "><a href="commandfailures.html">Handling command failures</a></li></ol></li><li class="chapter-item expanded "><a href="arguments.html">Command arguments</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="commandarguments.html">CommandArguments</a></li><li class="chapter-item expanded "><a href="optional_arguments.html">Optional arguments</a></li><li class="chapter-item expanded "><a href="listed.html">Listed arguments</a></li><li class="chapter-item expanded "><a href="argumentsuggestions.html">Argument suggestions</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="suggestionsinfo.html">The SuggestionsInfo record</a></li><li class="chapter-item "><a href="stringargumentsuggestions.html">String argument suggestions</a></li><li class="chapter-item "><a href="safeargumentsuggestions.html">Safely typed argument suggestions</a></li><li class="chapter-item "><a href="tooltips.html">Argument suggestions with tooltips</a></li><li class="chapter-item "><a href="asyncsuggestions.html">Asynchronous suggestions</a></li></ol></li><li class="chapter-item expanded "><a href="argumenttypes.html">Argument types</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="argument_primitives.html">Primitive arguments</a></li><li class="chapter-item "><a href="argument_range.html">Ranged arguments</a></li><li class="chapter-item "><a href="argument_strings.html">String arguments</a></li><li class="chapter-item "><a href="category_positional_arguments.html">Positional arguments</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="argument_locations.html">Location arguments</a></li><li class="chapter-item "><a href="argument_rotation.html">Rotation arguments</a></li><li class="chapter-item "><a href="argument_axis.html">AxisArguments</a></li></ol></li><li class="chapter-item "><a href="argument_chats.html">Chat arguments</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="argument_chat_spigot.html">Spigot chat arguments</a></li><li class="chapter-item "><a href="argument_chat_adventure.html">Adventure chat arguments</a></li><li class="chapter-item "><a href="chatpreview.html">Chat preview</a></li></ol></li><li class="chapter-item "><a href="argument_entities.html">Entity & player arguments</a></li><li class="chapter-item "><a href="category_scoreboard_arguments.html">Scoreboard arguments</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="argument_scoreboards.html">Scoreboard arguments</a></li><li class="chapter-item "><a href="argument_objectives.html">Objective arguments</a></li><li class="chapter-item "><a href="argument_team.html">Team arguments</a></li></ol></li><li class="chapter-item "><a href="category_miscellaneous_arguments.html">Miscellaneous arguments</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="argument_angle.html">Angle arguments</a></li><li class="chapter-item "><a href="advancementargument.html">Advancement arguments</a></li><li class="chapter-item "><a href="argument_biome.html">Biome arguments</a></li><li class="chapter-item "><a href="argument_blockstate.html">BlockState arguments</a></li><li class="chapter-item "><a href="argument_enchantment.html">Enchantment arguments</a></li><li class="chapter-item "><a href="argument_itemstack.html">Itemstack arguments</a></li><li class="chapter-item "><a href="argument_loottable.html">LootTable argument</a></li><li class="chapter-item "><a href="argument_mathoperation.html">MathOperation arguments</a></li><li class="chapter-item "><a href="argument_namespacedkey.html">NamespacedKey arguments</a></li><li class="chapter-item "><a href="argument_particles.html">Particle arguments</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="argument_particle_old.html">Particle data (before 1.20.5)</a></li><li class="chapter-item "><a href="argument_particle_new.html">Particle data (1.20.5+)</a></li></ol></li><li class="chapter-item "><a href="argument_potion.html">Potion effect arguments</a></li><li class="chapter-item "><a href="argument_recipe.html">Recipe arguments</a></li><li class="chapter-item "><a href="argument_sound.html">Sound arguments</a></li><li class="chapter-item "><a href="argument_time.html">Time arguments</a></li><li class="chapter-item "><a href="argument_uuid.html">UUID arguments</a></li><li class="chapter-item "><a href="argument_world.html">World arguments</a></li></ol></li><li class="chapter-item "><a href="predicateargs.html">Predicate arguments</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="argument_blockpredicate.html">Block predicate arguments</a></li><li class="chapter-item "><a href="argument_itemstackpredicate.html">ItemStack predicate arguments</a></li></ol></li><li class="chapter-item "><a href="argument_nbt.html">NBT arguments</a></li><li class="chapter-item "><a href="category_literal_arguments.html">Literal arguments</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="argument_literal.html">Literal arguments</a></li><li class="chapter-item "><a href="argument_multiliteral.html">Multi literal arguments</a></li></ol></li><li class="chapter-item "><a href="argument_list.html">List arguments</a></li><li class="chapter-item "><a href="argument_map.html">Map arguments</a></li><li class="chapter-item "><a href="argument_command.html">Command arguments</a></li><li class="chapter-item "><a href="argument_custom.html">Custom arguments</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="functions.html">Functions & Tags</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="functionsetup.html">Setting up functions & tags</a></li><li class="chapter-item expanded "><a href="simplefunctionwrapper.html">The SimpleFunctionWrapper class</a></li><li class="chapter-item expanded "><a href="functionwrapper.html">The FunctionWrapper class</a></li><li class="chapter-item expanded "><a href="argument_function.html">Function arguments</a></li></ol></li><li class="chapter-item expanded "><a href="permissions.html">Permissions</a></li><li class="chapter-item expanded "><a href="requirements.html">Requirements</a></li><li class="chapter-item expanded "><a href="aliases.html">Aliases</a></li><li class="chapter-item expanded "><a href="help.html">Help</a></li><li class="chapter-item expanded "><a href="subcommands.html">Subcommands</a></li><li class="chapter-item expanded "><a href="commandtrees.html">Command trees</a></li><li class="chapter-item expanded affix "><li class="part-title">Annotation-based Commands</li><li class="chapter-item expanded "><a href="annotationsintro.html">Annotation-based commands</a></li><li class="chapter-item expanded "><a href="annotations.html">Annotations</a></li><li class="chapter-item expanded "><a href="registeringannotations.html">Registering annotation-based commands</a></li><li class="chapter-item expanded affix "><li class="part-title">Kotlin-based Commands</li><li class="chapter-item expanded "><a href="kotlinintro.html">Kotlin-based commands</a></li><li class="chapter-item expanded "><a href="kotlindsl.html">Using the DSL</a></li><li class="chapter-item expanded "><a href="delegated_properties.html">Delegated properties</a></li><li class="spacer"></li><li class="chapter-item expanded affix "><li class="part-title">Velocity</li><li class="chapter-item expanded "><a href="velocity_intro.html">Velocity</a></li><li class="spacer"></li><li class="chapter-item expanded affix "><li class="part-title">CommandAPI Utilities</li><li class="chapter-item expanded "><a href="conversion.html">Command conversion</a></li><li class="chapter-item expanded "><a href="reloading.html">Plugin reloading</a></li><li class="chapter-item expanded affix "><li class="part-title">Internal CommandAPI</li><li class="chapter-item expanded "><a href="internal.html">Internal CommandAPI</a></li><li class="chapter-item expanded "><a href="brigadier.html">Brigadier + CommandAPI</a></li><li class="chapter-item expanded "><a href="brigadiersuggestions.html">Brigadier Suggestions</a></li><li class="spacer"></li><li class="chapter-item expanded affix "><li class="part-title">Java Tips</li><li class="chapter-item expanded "><a href="predicatetips.html">Predicate tips</a></li><li class="spacer"></li><li class="chapter-item expanded affix "><li class="part-title">CommandAPI Contribution</li><li class="chapter-item expanded "><a href="contributionintro.html">Introduction</a></li><li class="chapter-item expanded "><a href="projectstructure.html">Project Structure</a></li><li class="spacer"></li><li class="chapter-item expanded "><a href="upgrading.html">Upgrading guide</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="upgrading_old.html">Upgrading guide (pre-9.0.0)</a></li></ol></li><li class="chapter-item expanded "><a href="faq.html">FAQ</a></li><li class="chapter-item expanded affix "><a href="incompatibleversions.html">Incompatible version information</a></li><li class="chapter-item expanded affix "><a href="troubleshooting.html">Troubleshooting</a></li><li class="spacer"></li><li class="chapter-item expanded affix "><a href="afterword.html">Afterword</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fas fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fas fa-palette"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="skepter">Skepter Likes Purple</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fas fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">CommandAPI Documentation v9.4.1</h1>

                    <div class="right-buttons">
                        <a href="https://www.jorel.dev/CommandAPI/" title="Back to main CommandAPI page" aria-label="Back to main CommandAPI page">
                            <i id="home-button" class="fas fa-home"></i>
                        </a>
                        <a href="https://ko-fi.com/jorelali" title="Donate (ko-fi)" aria-label="Donate (ko-fi)">
                            <i id="donate-button" class="fas fa-donate"></i>
                        </a>
                        <a href="https://discord.com/invite/G4SzSxZ" title="Discord" aria-label="Discord">
                            <i id="discord-button" class="fab fa-discord"></i>
                        </a>
                        <a href="https://github.com/JorelAli/CommandAPI" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fab fa-github"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <!-- Page table of contents -->
                        <div class="sidetoc"><nav class="pagetoc"></nav></div>
                        
                        <h1 id="shading-the-commandapi-in-your-plugins"><a class="header" href="#shading-the-commandapi-in-your-plugins">Shading the CommandAPI in your plugins</a></h1>
<p>&quot;Shading&quot; is the process of including the CommandAPI inside your plugin, rather than requiring the CommandAPI as an external plugin. In other words, if you shade the CommandAPI into your plugin, you don't need to include the <code>CommandAPI.jar</code> in your server's plugins folder.</p>
<hr />
<h2 id="shading-vs-commandapi-plugin"><a class="header" href="#shading-vs-commandapi-plugin">Shading vs CommandAPI plugin</a></h2>
<p>The CommandAPI plugin has a few slight differences with the shaded CommandAPI jar file. The CommandAPI plugin has the following extra features that are not present in the shaded version:</p>
<ul>
<li>Command conversion via a <code>config.yml</code> file</li>
</ul>
<hr />
<h2 id="shading-requirements"><a class="header" href="#shading-requirements">Shading requirements</a></h2>
<p>For the CommandAPI to function as normal, you <strong>must</strong> call the CommandAPI's initializers in the <code>onLoad()</code> and <code>onEnable()</code> methods of your plugin:</p>
<pre><code class="language-java">CommandAPI.onLoad(CommandAPIConfig config);
CommandAPI.onEnable();
</code></pre>
<p>If you want to handle reloading, the CommandAPI has minimal support for it with the <code>onDisable()</code> method, which can go in your plugin. This is optional and is not required if you don't plan on reloading the server.</p>
<h3 id="loading"><a class="header" href="#loading">Loading</a></h3>
<p>The <code>onLoad(CommandAPIConfig)</code> method initializes the CommandAPI's loading sequence. This must be called <em>before</em> you start to access the CommandAPI and must be placed in your plugin's <code>onLoad()</code> method. The argument <code>CommandAPIConfig</code> is used to configure how the CommandAPI works. The <code>CommandAPIConfig</code> class has the following parameters which let you set how the CommandAPI works similar to the <code>config.yml</code>, which is described <a href="./config.html">here</a>.</p>
<pre><code class="language-java">public class CommandAPIConfig {
    CommandAPIConfig verboseOutput(boolean value); // Enables verbose logging
    CommandAPIConfig silentLogs(boolean value);    // Disables ALL logging (except errors)
    CommandAPIConfig useLatestNMSVersion(boolean value); // Whether the latest NMS implementation should be used or not
    CommandAPIConfig missingExecutorImplementationMessage(String value); // Set message to display when executor implementation is missing
    CommandAPIConfig dispatcherFile(File file); // If not null, the CommandAPI will create a JSON file with Brigadier's command tree
    CommandAPIConfig setNamespace(String namespace); // The namespace to use when the CommandAPI registers a command
    CommandAPIConfig usePluginNamespace(); // Whether the CommandAPI should use the name of the plugin passed into the CommandAPIConfig implementation as the default namespace for commands

    &lt;T&gt; CommandAPIConfig initializeNBTAPI(Class&lt;T&gt; nbtContainerClass, Function&lt;Object, T&gt; nbtContainerConstructor); // Initializes hooks with an NBT API. See NBT arguments documentation page for more info
}
</code></pre>
<p>The <code>CommandAPIConfig</code> class follows a typical builder pattern (without you having to run <code>.build()</code> at the end), which lets you easily construct configuration instances.</p>
<p>However, the <code>CommandAPIConfig</code> class is abstract and cannot be used to configure the CommandAPI directly. Instead, you must use a subclass of <code>CommandAPIConfig</code> that corresponds to the platform you are developing for. For example, when developing for Bukkit, you should use the <code>CommandAPIBukkiConfig</code> class.</p>
<!-- TODO: Add tabs and explanations for other platforms -->
<pre><code class="language-java">public class CommandAPIBukkitConfig extends CommandAPIConfig {
    CommandAPIBukkitConfig(JavaPlugin plugin);

    CommandAPIBukkitConfig shouldHookPaperReload(boolean hooked); // Whether the CommandAPI should hook into the Paper-exclusive ServerResourcesReloadedEvent
}
</code></pre>
<p>In order to create a <code>CommandAPIBukkitConfig</code> object, you must give it a reference to your <code>JavaPlugin</code> instance. The CommandAPI always uses this to registers events, so it is required when loading the CommandAPI on Bukkit. There are also Bukkit-specific features, such as the <code>hook-paper-reload</code> configuration option, which may be configured using a <code>CommandAPIBukkitConfig</code> instance.</p>
<p>For example, to load the CommandAPI on Bukkit with all logging disabled, you can use the following:</p>
<div class="multi-pre">
<pre><code class="language-java Java">CommandAPI.onLoad(new CommandAPIBukkitConfig(plugin).silentLogs(true));
</code></pre>
<pre><code class="language-kotlin Kotlin">CommandAPI.onLoad(CommandAPIBukkitConfig(plugin).silentLogs(true))
</code></pre>
</div>
<h3 id="enabling--disabling"><a class="header" href="#enabling--disabling">Enabling &amp; Disabling</a></h3>
<p>The <code>onEnable()</code> method initializes the CommandAPI's enabling sequence. Similar to the <code>onLoad(CommandAPIConfig)</code> method, this must be placed in your plugin's <code>onEnable()</code> method. This isn't as strict as the <code>onLoad(CommandAPIConfig)</code> method, and can be placed anywhere in your <code>onEnable()</code> method.</p>
<p>The <code>onDisable()</code> method disables the CommandAPI gracefully. This should be placed in your plugin's <code>onDisable()</code> method. This doesn't unregister commands, so commands may persist during reloads - this can be mitigated using the <code>CommandAPI.unregister()</code> method.</p>
<div class="example">
<h3 id="example---setting-up-the-commandapi-in-your-plugin"><a class="header" href="#example---setting-up-the-commandapi-in-your-plugin">Example - Setting up the CommandAPI in your plugin</a></h3>
<div class="multi-pre">
<pre><code class="language-java Java">public class MyPlugin extends JavaPlugin {

    @Override
    public void onLoad() {
        CommandAPI.onLoad(new CommandAPIBukkitConfig(this).verboseOutput(true)); // Load with verbose output
        
        new CommandAPICommand(&quot;ping&quot;)
            .executes((sender, args) -&gt; {
                sender.sendMessage(&quot;pong!&quot;);
            })
            .register();
    }
    
    @Override
    public void onEnable() {
        CommandAPI.onEnable();
        
        // Register commands, listeners etc.
    }
    
    @Override
    public void onDisable() {
        CommandAPI.onDisable();
    }

}
</code></pre>
<pre><code class="language-kotlin Kotlin">class MyPlugin : JavaPlugin() {

    override fun onLoad() {
        CommandAPI.onLoad(CommandAPIBukkitConfig(this).verboseOutput(true)) // Load with verbose output

        CommandAPICommand(&quot;ping&quot;)
            .executes(CommandExecutor { sender, _ -&gt;
                sender.sendMessage(&quot;pong!&quot;)
            })
            .register()
    }

    override fun onEnable() {
        CommandAPI.onEnable()

        // Register commands, listeners etc.
    }

    override fun onDisable() {
        CommandAPI.onDisable()
    }

}
</code></pre>
</div>
</div>
<hr />
<h2 id="a-note-about-relocating"><a class="header" href="#a-note-about-relocating">A note about relocating</a></h2>
<p>By default, the CommandAPI is written in the <code>dev.jorel.commandapi</code> package. It is <strong>highly recommended</strong> to &quot;relocate&quot; the shaded copy of the CommandAPI to your own package instead to prevent package clashes with other projects that shade the CommandAPI:</p>
<p>\begin{align}
&amp;\qquad\texttt{dev.jorel.commandapi} \rightarrow \texttt{my.custom.package.commandapi} \\
\end{align}</p>
<hr />
<h2 id="shading-with-maven"><a class="header" href="#shading-with-maven">Shading with Maven</a></h2>
<p>To shade the CommandAPI into a maven project, you'll need to use the <code>commandapi-bukkit-shade</code> dependency, which is optimized for shading and doesn't include plugin-specific files <em>(such as <code>plugin.yml</code>)</em>. Here you have a choice between the Spigot-mapped version and the Mojang-mapped version. <strong>You do not need to use <code>commandapi-bukkit-core</code> if you are shading</strong>:</p>
<p>Add the CommandAPI shade dependency:</p>
<div class="multi-pre">
<pre><code class="language-xml Spigot_Mappings">&lt;dependencies&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;dev.jorel&lt;/groupId&gt;
        &lt;artifactId&gt;commandapi-bukkit-shade&lt;/artifactId&gt;
        &lt;version&gt;9.4.1&lt;/version&gt;
    &lt;/dependency&gt;
&lt;/dependencies&gt;
</code></pre>
<pre><code class="language-xml Mojang_Mappings">&lt;dependencies&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;dev.jorel&lt;/groupId&gt;
        &lt;artifactId&gt;commandapi-bukkit-shade-mojang-mapped&lt;/artifactId&gt;
        &lt;version&gt;9.4.1&lt;/version&gt;
    &lt;/dependency&gt;
&lt;/dependencies&gt;
</code></pre>
</div>
<p>You can shade the CommandAPI easily by adding the <code>maven-shade-plugin</code> to your build sequence using version <code>3.3.0</code> (compatible with Java 16):</p>
<pre><code class="language-xml">&lt;build&gt;
    &lt;plugins&gt;
        &lt;plugin&gt;
            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
            &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;
            &lt;version&gt;3.3.0&lt;/version&gt;
            &lt;executions&gt;
                &lt;execution&gt;
                    &lt;id&gt;shade&lt;/id&gt;
                    &lt;phase&gt;package&lt;/phase&gt;
                    &lt;goals&gt;
                        &lt;goal&gt;shade&lt;/goal&gt;
                    &lt;/goals&gt;
                &lt;/execution&gt;
            &lt;/executions&gt;
            &lt;configuration&gt;
                &lt;minimizeJar&gt;true&lt;/minimizeJar&gt;
                &lt;relocations&gt;
                    &lt;relocation&gt;
                        &lt;pattern&gt;dev.jorel.commandapi&lt;/pattern&gt;
                        &lt;!-- TODO: Change this to my own package name --&gt;
                        &lt;shadedPattern&gt;my.custom.package.commandapi&lt;/shadedPattern&gt;
                    &lt;/relocation&gt;
                &lt;/relocations&gt;
            &lt;/configuration&gt;
        &lt;/plugin&gt;
    &lt;/plugins&gt;
&lt;/build&gt;
</code></pre>
<p>As we're shading the CommandAPI into your plugin, you <strong>don't</strong> need to add <code>depend: [CommandAPI]</code> to your <code>plugin.yml</code> file.</p>
<hr />
<h2 id="shading-with-gradle"><a class="header" href="#shading-with-gradle">Shading with Gradle</a></h2>
<p>To shade the CommandAPI into a Gradle project, we'll use the <a href="https://imperceptiblethoughts.com/shadow/">Gradle Shadow Plugin</a>. Add this to your list of plugins:</p>
<div class="multi-pre">
<pre><code class="language-groovy build.gradle">plugins {
    id 'java'
    id 'com.github.johnrengelman.shadow' version '7.1.2'
}
</code></pre>
<pre><code class="language-kotlin build.gradle.kts">plugins {
    java
    id(&quot;com.github.johnrengelman.shadow&quot;) version &quot;7.1.2&quot;
}
</code></pre>
</div>
<p>Add our repositories:</p>
<div class="multi-pre">
<pre><code class="language-groovy build.gradle">repositories {
    mavenCentral()

    // If you want to shade the NBT API as well
    maven { url = &quot;https://repo.codemc.org/repository/maven-public/&quot; }
}
</code></pre>
<pre><code class="language-kotlin build.gradle.kts">repositories {
    mavenCentral()

    // If you want to shade the NBT API as well
    maven(url = &quot;https://repo.codemc.org/repository/maven-public/&quot;)
}
</code></pre>
</div>
<p>Next, we declare our dependencies:</p>
<div class="multi-pre">
<pre><code class="language-groovy build.gradle_(Spigot_Mappings)">dependencies {
    implementation &quot;dev.jorel:commandapi-bukkit-shade:9.4.1&quot;
}
</code></pre>
<pre><code class="language-groovy build.gradle_(Mojang_Mappings)">dependencies {
    implementation &quot;dev.jorel:commandapi-bukkit-shade-mojang-mapped:9.4.1&quot;
}
</code></pre>
<pre><code class="language-kotlin build.gradle.kts_(Spigot_Mappings)">dependencies {
    implementation(&quot;dev.jorel:commandapi-bukkit-shade:9.4.1&quot;)
}
</code></pre>
<pre><code class="language-kotlin build.gradle.kts_(Mojang_Mappings)">dependencies {
    implementation(&quot;dev.jorel:commandapi-bukkit-shade-mojang-mapped:9.4.1&quot;)
}
</code></pre>
</div>
<p>Then we add it to the <code>shadowJar</code> task configuration and relocate the CommandAPI to your desired location:</p>
<div class="multi-pre">
<pre><code class="language-groovy build.gradle_(Spigot_Mappings)">shadowJar {
    dependencies {
        include dependency(&quot;dev.jorel:commandapi-bukkit-shade:9.4.1&quot;)
    }

    // TODO: Change this to my own package name
    relocate(&quot;dev.jorel.commandapi&quot;, &quot;my.custom.package.commandapi&quot;)
}
</code></pre>
<pre><code class="language-groovy build.gradle_(Mojang_Mappings)">shadowJar {
    dependencies {
        include dependency(&quot;dev.jorel:commandapi-bukkit-shade-mojang-mapped:9.4.1&quot;)
    }

    // TODO: Change this to my own package name
    relocate(&quot;dev.jorel.commandapi&quot;, &quot;my.custom.package.commandapi&quot;)
}
</code></pre>
<pre><code class="language-kotlin build.gradle.kts_(Spigot_Mappings)">tasks.withType&lt;ShadowJar&gt; {
    dependencies {
        include(dependency(&quot;dev.jorel:commandapi-bukkit-shade:9.4.1&quot;))
    }

    // TODO: Change this to my own package name
    relocate(&quot;dev.jorel.commandapi&quot;, &quot;my.custom.package.commandapi&quot;)
}
</code></pre>
<pre><code class="language-kotlin build.gradle.kts_(Mojang_Mappings)">tasks.withType&lt;ShadowJar&gt; {
    dependencies {
        include(dependency(&quot;dev.jorel:commandapi-bukkit-shade-mojang-mapped:9.4.1&quot;))
    }

    // TODO: Change this to my own package name
    relocate(&quot;dev.jorel.commandapi&quot;, &quot;my.custom.package.commandapi&quot;)
}
</code></pre>
</div>
<p>Finally, we can build the shaded jar using the following command:</p>
<pre><code class="language-bash">gradlew build shadowJar
</code></pre>
<p>As we're shading the CommandAPI into your plugin, we <strong>don't</strong> need to add <code>depend: [CommandAPI]</code> to your <code>plugin.yml</code> file.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="setup_dev.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fas fa-chevron-left"></i>
                            </a>

                            <a rel="next" href="setup_annotations.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fas fa-chevron-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="setup_dev.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fas fa-chevron-left"></i>
                    </a>

                    <a rel="next" href="setup_annotations.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fas fa-chevron-right"></i>
                    </a>
            </nav>

        </div>




        <script type="text/javascript">
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        <script type="text/javascript" src="sidebar.js"></script>
        <script type="text/javascript" src="mccmd.js"></script>
        <script type="text/javascript" src="kotlin-dsl.js"></script>
        <script type="text/javascript" src="jszip.min.js"></script>
        <script type="text/javascript" src="yaml.min.js"></script>
        <script type="text/javascript" src="pluginyml.js"></script>


    </body>
</html>
